<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Member Login - Marriage Education</title>
  <link rel="stylesheet" href="style.css" />
</head>
<body>
  <header>
    <div class="container">
      <h1>Member Login</h1>
      <nav>
        <a href="index.html">Home</a>
        <a href="about.html">About</a>
        <a href="shop.html">Shop</a>
        <a href="courses.html">Courses</a>
        <a href="blog.html">Blog</a>
        <a href="contact.html">Contact</a>
      </nav>
    </div>
  </header>

  <section class="auth-section">
    <div class="container">
      <div class="auth-container">
        <div class="auth-header">
          <h2>Welcome Back</h2>
          <p>Sign in to access your courses and continue your marriage transformation journey.</p>
        </div>

        <div class="auth-tabs">
          <button class="tab-button active" data-tab="login">Sign In</button>
          <button class="tab-button" data-tab="register">Create Account</button>
        </div>

        <!-- Login Form -->
        <div class="auth-tab active" id="login-tab">
          <form id="login-form" class="auth-form">
            <div class="form-group">
              <label for="login-email">Email Address</label>
              <input type="email" id="login-email" name="email" required />
            </div>

            <div class="form-group">
              <label for="login-password">Password</label>
              <input type="password" id="login-password" name="password" required />
            </div>

            <div class="form-group">
              <label class="checkbox-label">
                <input type="checkbox" name="remember" />
                <span class="checkmark"></span>
                Remember me
              </label>
            </div>

            <button type="submit" class="auth-button">Sign In</button>

            <div class="auth-links">
              <a href="#" id="forgot-password-link">Forgot your password?</a>
            </div>
          </form>
        </div>

        <!-- Register Form -->
        <div class="auth-tab" id="register-tab">
          <form id="register-form" class="auth-form">
            <div class="form-row">
              <div class="form-group">
                <label for="register-first-name">First Name</label>
                <input type="text" id="register-first-name" name="first_name" required />
              </div>
              <div class="form-group">
                <label for="register-last-name">Last Name</label>
                <input type="text" id="register-last-name" name="last_name" required />
              </div>
            </div>

            <div class="form-group">
              <label for="register-email">Email Address</label>
              <input type="email" id="register-email" name="email" required />
            </div>

            <div class="form-group">
              <label for="register-password">Password</label>
              <input type="password" id="register-password" name="password" required minlength="8" />
              <small class="form-help">Minimum 8 characters</small>
            </div>

            <div class="form-group">
              <label for="register-confirm-password">Confirm Password</label>
              <input type="password" id="register-confirm-password" name="confirm_password" required />
            </div>

            <div class="form-group">
              <label class="checkbox-label">
                <input type="checkbox" name="agree_terms" required />
                <span class="checkmark"></span>
                I agree to the <a href="/terms.html" target="_blank">Terms of Service</a> and <a href="/privacy.html" target="_blank">Privacy Policy</a>
              </label>
            </div>

            <div class="form-group">
              <label class="checkbox-label">
                <input type="checkbox" name="marketing_emails" />
                <span class="checkmark"></span>
                Send me marketing emails about new courses and special offers
              </label>
            </div>

            <button type="submit" class="auth-button">Create Account</button>
          </form>
        </div>

        <!-- Forgot Password Form -->
        <div class="auth-tab" id="forgot-tab">
          <form id="forgot-form" class="auth-form">
            <div class="form-group">
              <label for="forgot-email">Email Address</label>
              <input type="email" id="forgot-email" name="email" required />
              <small class="form-help">We'll send you a link to reset your password</small>
            </div>

            <button type="submit" class="auth-button">Send Reset Link</button>

            <div class="auth-links">
              <a href="#" id="back-to-login">Back to Sign In</a>
            </div>
          </form>
        </div>

        <div class="auth-divider">
          <span>New to Marriage Education?</span>
        </div>

        <div class="auth-benefits">
          <h3>Join thousands of couples transforming their marriages</h3>
          <ul>
            <li>‚úì Access to exclusive courses and resources</li>
            <li>‚úì Track your progress and achievements</li>
            <li>‚úì Join our supportive community</li>
            <li>‚úì Get personalized recommendations</li>
          </ul>
        </div>
      </div>
    </div>
  </section>

  <footer>
    <div class="container">
      <div class="footer-content">
        <div class="footer-section">
          <h4>Marriage Education</h4>
          <p>Transforming relationships through proven methodologies and deep wisdom.</p>
        </div>
        <div class="footer-section">
          <h4>Support</h4>
          <p>Email: support@marriageducation.com</p>
          <p>Response within 24 hours</p>
        </div>
        <div class="footer-section">
          <h4>Security</h4>
          <p>üîí Your data is secure and encrypted</p>
          <p>üõ°Ô∏è We never share your information</p>
        </div>
      </div>
      <div class="footer-bottom">
        <p>&copy; 2025 Marriage Education. All rights reserved.</p>
      </div>
    </div>
  </footer>

  <script src="js/analytics.js"></script>
  <script>
    document.addEventListener('DOMContentLoaded', function() {
      // Tab switching
      document.querySelectorAll('.tab-button').forEach(button => {
        button.addEventListener('click', function() {
          const tabName = this.dataset.tab;
          
          // Update active tab button
          document.querySelectorAll('.tab-button').forEach(btn => btn.classList.remove('active'));
          this.classList.add('active');
          
          // Update active tab content
          document.querySelectorAll('.auth-tab').forEach(tab => tab.classList.remove('active'));
          document.getElementById(tabName + '-tab').classList.add('active');
        });
      });

      // Forgot password link
      document.getElementById('forgot-password-link').addEventListener('click', function(e) {
        e.preventDefault();
        
        // Hide tabs
        document.querySelector('.auth-tabs').style.display = 'none';
        
        // Show forgot password form
        document.querySelectorAll('.auth-tab').forEach(tab => tab.classList.remove('active'));
        document.getElementById('forgot-tab').classList.add('active');
      });

      // Back to login link
      document.getElementById('back-to-login').addEventListener('click', function(e) {
        e.preventDefault();
        
        // Show tabs
        document.querySelector('.auth-tabs').style.display = 'flex';
        
        // Show login form
        document.querySelectorAll('.auth-tab').forEach(tab => tab.classList.remove('active'));
        document.getElementById('login-tab').classList.add('active');
        
        // Activate login tab
        document.querySelectorAll('.tab-button').forEach(btn => btn.classList.remove('active'));
        document.querySelector('[data-tab="login"]').classList.add('active');
      });

      // Form submissions
      document.getElementById('login-form').addEventListener('submit', async function(e) {
        e.preventDefault();
        
        const formData = new FormData(this);
        const email = formData.get('email');
        const password = formData.get('password');
        
        try {
          const response = await fetch('/api/auth/login', {
            method: 'POST',
            headers: {
              'Content-Type': 'application/json',
            },
            credentials: 'include',
            body: JSON.stringify({ email, password })
          });

          if (response.ok) {
            window.location.href = '/dashboard.html';
          } else {
            const error = await response.json();
            alert('Login failed: ' + error.message);
          }
        } catch (error) {
          alert('Login failed. Please try again.');
        }
      });

      document.getElementById('register-form').addEventListener('submit', async function(e) {
        e.preventDefault();
        
        const formData = new FormData(this);
        const password = formData.get('password');
        const confirmPassword = formData.get('confirm_password');
        
        if (password !== confirmPassword) {
          alert('Passwords do not match');
          return;
        }
        
        const userData = {
          first_name: formData.get('first_name'),
          last_name: formData.get('last_name'),
          email: formData.get('email'),
          password: password,
          marketing_emails: formData.get('marketing_emails') === 'on'
        };
        
        try {
          const response = await fetch('/api/auth/register', {
            method: 'POST',
            headers: {
              'Content-Type': 'application/json',
            },
            body: JSON.stringify(userData)
          });

          if (response.ok) {
            alert('Account created successfully! Please check your email to verify your account.');
          } else {
            const error = await response.json();
            alert('Registration failed: ' + error.message);
          }
        } catch (error) {
          alert('Registration failed. Please try again.');
        }
      });

      document.getElementById('forgot-form').addEventListener('submit', async function(e) {
        e.preventDefault();
        
        const formData = new FormData(this);
        const email = formData.get('email');
        
        try {
          const response = await fetch('/api/auth/forgot-password', {
            method: 'POST',
            headers: {
              'Content-Type': 'application/json',
            },
            body: JSON.stringify({ email })
          });

          if (response.ok) {
            alert('Password reset link sent to your email!');
          } else {
            alert('Failed to send reset link. Please try again.');
          }
        } catch (error) {
          alert('Failed to send reset link. Please try again.');
        }
      });
    });
  </script>

  <style>
    .auth-section {
      padding: 4rem 0;
      background: linear-gradient(135deg, #f8f9fa, #e9ecef);
      min-height: 80vh;
    }

    .auth-container {
      max-width: 500px;
      margin: 0 auto;
      background: white;
      padding: 3rem;
      border-radius: 15px;
      box-shadow: 0 10px 30px rgba(0,0,0,0.1);
    }

    .auth-header {
      text-align: center;
      margin-bottom: 2rem;
    }

    .auth-header h2 {
      color: #2d3436;
      margin-bottom: 0.5rem;
    }

    .auth-header p {
      color: #636e72;
      font-size: 1.1rem;
    }

    .auth-tabs {
      display: flex;
      margin-bottom: 2rem;
      border-bottom: 1px solid #e9ecef;
    }

    .tab-button {
      flex: 1;
      padding: 1rem;
      background: none;
      border: none;
      font-size: 1rem;
      cursor: pointer;
      color: #636e72;
      border-bottom: 2px solid transparent;
      transition: all 0.3s ease;
    }

    .tab-button.active {
      color: #74b9ff;
      border-bottom-color: #74b9ff;
    }

    .auth-tab {
      display: none;
    }

    .auth-tab.active {
      display: block;
    }

    .auth-form {
      margin-bottom: 2rem;
    }

    .form-row {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 1rem;
    }

    .form-group {
      margin-bottom: 1.5rem;
    }

    .form-group label {
      display: block;
      margin-bottom: 0.5rem;
      font-weight: 600;
      color: #2d3436;
    }

    .form-group input {
      width: 100%;
      padding: 1rem;
      border: 1px solid #ddd;
      border-radius: 8px;
      font-size: 1rem;
      transition: border-color 0.3s ease;
    }

    .form-group input:focus {
      border-color: #74b9ff;
      outline: none;
    }

    .form-help {
      display: block;
      margin-top: 0.25rem;
      font-size: 0.9rem;
      color: #636e72;
    }

    .checkbox-label {
      display: flex !important;
      align-items: center;
      gap: 0.75rem;
      cursor: pointer;
      font-weight: normal !important;
    }

    .checkbox-label input[type="checkbox"] {
      width: auto !important;
    }

    .auth-button {
      width: 100%;
      padding: 1rem 2rem;
      background: linear-gradient(135deg, #74b9ff, #0984e3);
      color: white;
      border: none;
      border-radius: 8px;
      font-size: 1.1rem;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.3s ease;
    }

    .auth-button:hover {
      transform: translateY(-1px);
      box-shadow: 0 5px 15px rgba(116, 185, 255, 0.4);
    }

    .auth-links {
      text-align: center;
      margin-top: 1rem;
    }

    .auth-links a {
      color: #74b9ff;
      text-decoration: none;
      font-size: 0.9rem;
    }

    .auth-links a:hover {
      text-decoration: underline;
    }

    .auth-divider {
      text-align: center;
      margin: 2rem 0;
      position: relative;
    }

    .auth-divider span {
      background: white;
      padding: 0 1rem;
      color: #636e72;
      font-size: 0.9rem;
    }

    .auth-divider::before {
      content: '';
      position: absolute;
      top: 50%;
      left: 0;
      right: 0;
      height: 1px;
      background: #e9ecef;
      z-index: -1;
    }

    .auth-benefits h3 {
      color: #2d3436;
      margin-bottom: 1rem;
      text-align: center;
    }

    .auth-benefits ul {
      list-style: none;
      padding: 0;
    }

    .auth-benefits li {
      padding: 0.5rem 0;
      color: #636e72;
    }

    @media (max-width: 768px) {
      .auth-container {
        margin: 1rem;
        padding: 2rem;
      }

      .form-row {
        grid-template-columns: 1fr;
      }
    }
  </style>
</body>
</html>
